// Simple rule-based chatbot for when OpenAI is not available
export class SimpleChatBot {
  private language: 'en' | 'es';

  constructor(language: 'en' | 'es' = 'en') {
    this.language = language;
  }

  async generateResponse(message: string): Promise<string> {
    const lowerMessage = message.toLowerCase();
    
    // Check if this is just a name response (avoid generic response)
    if (lowerMessage.includes('my name is') || lowerMessage.includes('i am') || lowerMessage.includes("i'm")) {
      return "Nice to meet you! How can I assist you today with your legal needs?";
    }
    
    // Check if user is expressing gratitude
    if (lowerMessage === 'thank you' || lowerMessage === 'thanks' || lowerMessage === 'thank you so much' || lowerMessage === 'thanks a lot') {
      return "You're welcome! If you have any other questions or need further assistance, please don't hesitate to reach out. We're here to help!";
    }
    
    // Define response patterns
    const responses = {
      en: {
        greeting: [
          'hello', 'hi', 'hey', 'good morning', 'good afternoon', 'good evening'
        ],
        greetingResponse: "Hello! Welcome to Vasquez Law Firm. I'm here to help you with information about our legal services. How can I assist you today?",
        
        immigration: [
          'visa', 'green card', 'citizenship', 'immigration', 'deportation', 'asylum', 'naturalization', 'work permit'
        ],
        immigrationResponse: "We specialize in immigration law and can help with:\n‚Ä¢ Family-based visas and green cards\n‚Ä¢ Employment-based immigration\n‚Ä¢ Citizenship and naturalization\n‚Ä¢ Deportation defense\n‚Ä¢ Asylum applications\n‚Ä¢ Work permits and DACA\n\nWould you like to schedule a free consultation to discuss your specific case? Call us at 1-844-967-3536.",
        
        personalInjury: [
          'accident', 'injury', 'hurt', 'crash', 'slip', 'fall', 'medical malpractice', 'personal injury'
        ],
        personalInjuryResponse: "We handle all types of personal injury cases including:\n‚Ä¢ Car accidents\n‚Ä¢ Truck accidents\n‚Ä¢ Slip and fall injuries\n‚Ä¢ Medical malpractice\n‚Ä¢ Wrongful death\n\nWe work on a contingency fee basis - you don't pay unless we win. Call 1-844-967-3536 for a free consultation.",
        
        workersComp: [
          'workers comp', 'work injury', 'workplace accident', 'workers compensation', 'job injury'
        ],
        workersCompResponse: "If you've been injured at work, we can help you:\n‚Ä¢ File your workers' compensation claim\n‚Ä¢ Appeal denied claims\n‚Ä¢ Get medical treatment covered\n‚Ä¢ Receive disability benefits\n‚Ä¢ Handle third-party claims\n\nDon't let your employer deny you benefits. Call 1-844-967-3536 for a free consultation.",
        
        criminal: [
          'criminal', 'arrest', 'dui', 'dwi', 'drug', 'assault', 'theft', 'charge'
        ],
        criminalResponse: "We provide strong criminal defense for:\n‚Ä¢ DUI/DWI charges\n‚Ä¢ Drug offenses\n‚Ä¢ Assault and battery\n‚Ä¢ Theft and property crimes\n‚Ä¢ Traffic violations\n‚Ä¢ Expungements\n\nProtect your rights and future. Call 1-844-967-3536 immediately for legal help.",
        
        family: [
          'divorce', 'custody', 'child support', 'separation', 'family law', 'alimony'
        ],
        familyResponse: "Our family law services include:\n‚Ä¢ Divorce proceedings\n‚Ä¢ Child custody arrangements\n‚Ä¢ Child support\n‚Ä¢ Spousal support/alimony\n‚Ä¢ Property division\n‚Ä¢ Prenuptial agreements\n\nWe understand this is a difficult time. Call 1-844-967-3536 for compassionate legal support.",
        
        appointment: [
          'appointment', 'consultation', 'meeting', 'schedule', 'talk to lawyer', 'speak with attorney'
        ],
        appointmentResponse: "I'd be happy to help you schedule a consultation with one of our attorneys. You can:\n‚Ä¢ Call us directly at 1-844-967-3536\n‚Ä¢ Visit our office in Charlotte, NC or Atlanta, GA\n‚Ä¢ We also offer virtual consultations\n\nMany consultations are free. What type of legal matter do you need help with?",
        
        cost: [
          'cost', 'fee', 'price', 'how much', 'payment', 'afford'
        ],
        costResponse: "We understand cost is a concern. We offer:\n‚Ä¢ Free consultations for most cases\n‚Ä¢ Contingency fees for personal injury (no win, no fee)\n‚Ä¢ Payment plans for other services\n‚Ä¢ Competitive rates\n\nCall 1-844-967-3536 to discuss your options with no obligation.",
        
        location: [
          'location', 'office', 'address', 'where', 'directions'
        ],
        locationResponse: "We have offices in:\n\nüìç Charlotte, NC\n4801 E Independence Blvd, Suite 200\nCharlotte, NC 28212\n\nüìç Atlanta, GA\n\nFor immigration matters, we serve clients nationwide. Call 1-844-967-3536 or visit us today!",
        
        hours: [
          'hours', 'open', 'time', 'when'
        ],
        hoursResponse: "Our office hours are:\nMonday - Friday: 9:00 AM - 6:00 PM\nSaturday: By appointment\nSunday: Closed\n\nFor emergencies, call 1-844-967-3536 - we have attorneys available for urgent matters.",
        
        default: "I can help you with information about:\n‚Ä¢ Immigration Law\n‚Ä¢ Personal Injury\n‚Ä¢ Workers' Compensation\n‚Ä¢ Criminal Defense\n‚Ä¢ Family Law\n\nFor specific legal advice or to speak with an attorney, please call 1-844-967-3536 for a free consultation.\n\nWhat type of legal matter can I help you with today?"
      },
      es: {
        greeting: [
          'hola', 'buenos d√≠as', 'buenas tardes', 'buenas noches', 'qu√© tal'
        ],
        greetingResponse: "¬°Hola! Bienvenido a Vasquez Law Firm. Estoy aqu√≠ para ayudarle con informaci√≥n sobre nuestros servicios legales. ¬øEn qu√© puedo asistirle hoy?",
        
        immigration: [
          'visa', 'tarjeta verde', 'ciudadan√≠a', 'inmigraci√≥n', 'deportaci√≥n', 'asilo', 'naturalizaci√≥n', 'permiso de trabajo'
        ],
        immigrationResponse: "Nos especializamos en leyes de inmigraci√≥n y podemos ayudar con:\n‚Ä¢ Visas y tarjetas verdes familiares\n‚Ä¢ Inmigraci√≥n basada en empleo\n‚Ä¢ Ciudadan√≠a y naturalizaci√≥n\n‚Ä¢ Defensa de deportaci√≥n\n‚Ä¢ Solicitudes de asilo\n‚Ä¢ Permisos de trabajo y DACA\n\n¬øLe gustar√≠a programar una consulta gratuita? Llame al 1-844-967-3536.",
        
        personalInjury: [
          'accidente', 'lesi√≥n', 'herida', 'choque', 'ca√≠da', 'negligencia m√©dica', 'lesiones personales'
        ],
        personalInjuryResponse: "Manejamos todo tipo de casos de lesiones personales:\n‚Ä¢ Accidentes automovil√≠sticos\n‚Ä¢ Accidentes de camiones\n‚Ä¢ Lesiones por resbalones y ca√≠das\n‚Ä¢ Negligencia m√©dica\n‚Ä¢ Muerte injusta\n\nTrabajamos con honorarios de contingencia - no paga a menos que ganemos. Llame al 1-844-967-3536 para una consulta gratuita.",
        
        workersComp: [
          'compensaci√≥n laboral', 'lesi√≥n trabajo', 'accidente laboral', 'compensaci√≥n trabajadores'
        ],
        workersCompResponse: "Si se lesion√≥ en el trabajo, podemos ayudarle a:\n‚Ä¢ Presentar su reclamo de compensaci√≥n laboral\n‚Ä¢ Apelar reclamos denegados\n‚Ä¢ Obtener tratamiento m√©dico cubierto\n‚Ä¢ Recibir beneficios por discapacidad\n‚Ä¢ Manejar reclamos de terceros\n\nNo deje que su empleador le niegue beneficios. Llame al 1-844-967-3536.",
        
        criminal: [
          'criminal', 'arresto', 'dui', 'dwi', 'droga', 'asalto', 'robo', 'cargo'
        ],
        criminalResponse: "Proporcionamos defensa criminal s√≥lida para:\n‚Ä¢ Cargos de DUI/DWI\n‚Ä¢ Delitos de drogas\n‚Ä¢ Asalto y agresi√≥n\n‚Ä¢ Robo y delitos contra la propiedad\n‚Ä¢ Violaciones de tr√°fico\n‚Ä¢ Eliminaci√≥n de antecedentes\n\nProteja sus derechos y futuro. Llame al 1-844-967-3536 inmediatamente.",
        
        family: [
          'divorcio', 'custodia', 'manutenci√≥n', 'separaci√≥n', 'derecho familiar', 'pensi√≥n alimenticia'
        ],
        familyResponse: "Nuestros servicios de derecho familiar incluyen:\n‚Ä¢ Procedimientos de divorcio\n‚Ä¢ Arreglos de custodia de hijos\n‚Ä¢ Manutenci√≥n infantil\n‚Ä¢ Manutenci√≥n conyugal\n‚Ä¢ Divisi√≥n de propiedad\n‚Ä¢ Acuerdos prenupciales\n\nEntendemos que es un momento dif√≠cil. Llame al 1-844-967-3536.",
        
        appointment: [
          'cita', 'consulta', 'reuni√≥n', 'programar', 'hablar con abogado'
        ],
        appointmentResponse: "Me encantar√≠a ayudarle a programar una consulta con uno de nuestros abogados. Puede:\n‚Ä¢ Llamarnos directamente al 1-844-967-3536\n‚Ä¢ Visitar nuestra oficina en Charlotte, NC o Atlanta, GA\n‚Ä¢ Tambi√©n ofrecemos consultas virtuales\n\nMuchas consultas son gratuitas. ¬øCon qu√© tipo de asunto legal necesita ayuda?",
        
        cost: [
          'costo', 'precio', 'cu√°nto', 'pago', 'tarifa'
        ],
        costResponse: "Entendemos que el costo es una preocupaci√≥n. Ofrecemos:\n‚Ä¢ Consultas gratuitas para la mayor√≠a de casos\n‚Ä¢ Honorarios de contingencia para lesiones personales\n‚Ä¢ Planes de pago para otros servicios\n‚Ä¢ Tarifas competitivas\n\nLlame al 1-844-967-3536 para discutir sus opciones sin obligaci√≥n.",
        
        location: [
          'ubicaci√≥n', 'oficina', 'direcci√≥n', 'd√≥nde', 'direcciones'
        ],
        locationResponse: "Tenemos oficinas en:\n\nüìç Charlotte, NC\n4801 E Independence Blvd, Suite 200\nCharlotte, NC 28212\n\nüìç Atlanta, GA\n\nPara asuntos de inmigraci√≥n, atendemos clientes en todo el pa√≠s. ¬°Llame al 1-844-967-3536!",
        
        hours: [
          'horario', 'abierto', 'hora', 'cu√°ndo'
        ],
        hoursResponse: "Nuestro horario de oficina es:\nLunes - Viernes: 9:00 AM - 6:00 PM\nS√°bado: Con cita previa\nDomingo: Cerrado\n\nPara emergencias, llame al 1-844-967-3536.",
        
        default: "Puedo ayudarle con informaci√≥n sobre:\n‚Ä¢ Ley de Inmigraci√≥n\n‚Ä¢ Lesiones Personales\n‚Ä¢ Compensaci√≥n Laboral\n‚Ä¢ Defensa Criminal\n‚Ä¢ Derecho Familiar\n\nPara asesoramiento legal espec√≠fico, llame al 1-844-967-3536 para una consulta gratuita.\n\n¬øCon qu√© tipo de asunto legal puedo ayudarle hoy?"
        }
};

    const patterns = responses[this.language];
    
    // Check greeting
    if (patterns.greeting.some(word => lowerMessage.includes(word))) {
      return patterns.greetingResponse;
    }
    
    // Check immigration
    if (patterns.immigration.some(word => lowerMessage.includes(word))) {
      return patterns.immigrationResponse;
    }
    
    // Check personal injury
    if (patterns.personalInjury.some(word => lowerMessage.includes(word))) {
      return patterns.personalInjuryResponse;
    }
    
    // Check workers comp
    if (patterns.workersComp.some(word => lowerMessage.includes(word))) {
      return patterns.workersCompResponse;
    }
    
    // Check criminal
    if (patterns.criminal.some(word => lowerMessage.includes(word))) {
      return patterns.criminalResponse;
    }
    
    // Check family law
    if (patterns.family.some(word => lowerMessage.includes(word))) {
      return patterns.familyResponse;
    }
    
    // Check appointment
    if (patterns.appointment.some(word => lowerMessage.includes(word))) {
      return patterns.appointmentResponse;
    }
    
    // Check cost
    if (patterns.cost.some(word => lowerMessage.includes(word))) {
      return patterns.costResponse;
    }
    
    // Check location
    if (patterns.location.some(word => lowerMessage.includes(word))) {
      return patterns.locationResponse;
    }
    
    // Check hours
    if (patterns.hours.some(word => lowerMessage.includes(word))) {
      return patterns.hoursResponse;
    }
    
    // Default response
    return patterns.default;
  }
}
